# WebStack CLI - MySQL/MariaDB Configuration
# Adapted from Hestia Control Panel

[client]
port=3306
socket=/run/mysqld/mysqld.sock
default-character-set=utf8mb4

[mysql]
default-character-set=utf8mb4

[mysqld_safe]
socket=/run/mysqld/mysqld.sock

[mysqld]
user=mysql
pid-file=/run/mysqld/mysqld.pid
socket=/run/mysqld/mysqld.sock
port=3306
basedir=/usr
datadir=/var/lib/mysql
tmpdir=/tmp
lc-messages-dir=/usr/share/mysql
log_error=/var/log/mysql/error.log
collation-server = utf8mb4_unicode_520_ci
init-connect='SET NAMES utf8mb4'
character-set-server = utf8mb4

# Security
symbolic-links=0
local-infile=0
skip-external-locking

# Performance tuning
key_buffer_size = 16M
max_allowed_packet = 16M
table_open_cache = 64
sort_buffer_size = 512K
net_buffer_length = 8K
read_buffer_size = 256K
read_rnd_buffer_size = 512K
myisam_sort_buffer_size = 8M

# InnoDB settings
innodb_file_per_table=1
innodb_buffer_pool_size = 128M
innodb_log_file_size = 32M

# Connection limits
max_connections=100
max_user_connections=50
wait_timeout=600
interactive_timeout=600
long_query_time=5

# Include additional configurations
!includedir /etc/mysql/conf.d/
!includedir /etc/mysql/mariadb.conf.d/